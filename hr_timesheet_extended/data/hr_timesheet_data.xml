<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        <!-- Sequence for Timesheet Approval -->
        <record id="seq_hr_timesheet_approval" model="ir.sequence">
            <field name="name">Timesheet Approval</field>
            <field name="code">hr.timesheet.approval</field>
            <field name="prefix">TS/%(year)s/%(month)s/</field>
            <field name="padding">4</field>
            <field name="company_id" eval="False"/>
        </record>

        <!-- Activity types -->
        <record id="mail_activity_data_timesheet_approval" model="mail.activity.type">
            <field name="name">Timesheet Approval</field>
            <field name="summary">Timesheet requires approval</field>
            <field name="category">default</field>
            <field name="delay_count">2</field>
            <field name="delay_unit">days</field>
            <field name="res_model">hr.timesheet.approval</field>
            <field name="icon">fa-clock-o</field>
        </record>

        <!-- Email templates -->
        <record id="email_template_timesheet_submitted" model="mail.template">
            <field name="name">Timesheet: Submitted</field>
            <field name="model_id" ref="model_hr_timesheet_approval"/>
            <field name="subject">Timesheet Submitted: {{ object.name }}</field>
            <field name="email_from">{{ user.email_formatted }}</field>
            <field name="partner_to">{{ object.manager_id.partner_id.id }}</field>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        Dear {{ object.manager_id.name }},
                        <br/>
                        <br/>
                        {{ object.employee_id.name }} has submitted a timesheet for your approval.
                        <br/>
                        <br/>
                        <strong>Timesheet Reference:</strong>
                        {{ object.name }}
                        <br/>
                        <strong>Period:</strong>
                        {{ object.date_start }} to {{ object.date_end }}
                        <br/>
                        <strong>Total Hours:</strong>
                        {{ object.total_hours }}
                        <br/>
                        <br/>
                        You can access the timesheet by clicking on the following link:
                        <br/>
                        <a href="/web#id={{ object.id }}&amp;model=hr.timesheet.approval&amp;view_type=form"
                           style="background-color: #875A7B; padding: 8px 16px 8px 16px; text-decoration: none; color: #fff; border-radius: 5px; font-size:13px;">
                            View Timesheet
                        </a>
                        <br/>
                        <br/>
                        Thank you,
                        <br/>
                        --
                        <br/>
                        Odoo HR Team
                    </p>
                </div>
            </field>
            <field name="lang">{{ object.manager_id.partner_id.lang }}</field>
            <field name="auto_delete" eval="True"/>
        </record>

        <record id="email_template_timesheet_approved_by_manager" model="mail.template">
            <field name="name">Timesheet: Approved By Manager</field>
            <field name="model_id" ref="model_hr_timesheet_approval"/>
            <field name="subject">Timesheet Approved By Manager: {{ object.name }}</field>
            <field name="email_from">{{ user.email_formatted }}</field>
            <field name="partner_to">{{ object.department_head_id.partner_id.id }}</field>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        Dear {{ object.department_head_id.name }},
                        <br/>
                        <br/>
                        {{ object.manager_id.name }} has approved {{ object.employee_id.name }}'s timesheet, which now
                        requires your approval.
                        <br/>
                        <br/>
                        <strong>Timesheet Reference:</strong>
                        {{ object.name }}
                        <br/>
                        <strong>Period:</strong>
                        {{ object.date_start }} to {{ object.date_end }}
                        <br/>
                        <strong>Total Hours:</strong>
                        {{ object.total_hours }}
                        <br/>
                        <br/>
                        You can access the timesheet by clicking on the following link:
                        <br/>
                        <a href="/web#id={{ object.id }}&amp;model=hr.timesheet.approval&amp;view_type=form"
                           style="background-color: #875A7B; padding: 8px 16px 8px 16px; text-decoration: none; color: #fff; border-radius: 5px; font-size:13px;">
                            View Timesheet
                        </a>
                        <br/>
                        <br/>
                        Thank you,
                        <br/>
                        --
                        <br/>
                        Odoo HR Team
                    </p>
                </div>
            </field>
            <field name="lang">{{ object.department_head_id.partner_id.lang }}</field>
            <field name="auto_delete" eval="True"/>
        </record>

        <record id="email_template_timesheet_approved_by_department" model="mail.template">
            <field name="name">Timesheet: Approved By Department Head</field>
            <field name="model_id" ref="model_hr_timesheet_approval"/>
            <field name="subject">Timesheet Approved By Department Head: {{ object.name }}</field>
            <field name="email_from">{{ user.email_formatted }}</field>
            <field name="partner_to">{{ object.hr_manager_id.partner_id.id }}</field>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        Dear HR Manager,
                        <br/>
                        <br/>
                        {{ object.department_head_id.name }} has approved {{ object.employee_id.name }}'s timesheet,
                        which now requires final HR approval.
                        <br/>
                        <br/>
                        <strong>Timesheet Reference:</strong>
                        {{ object.name }}
                        <br/>
                        <strong>Period:</strong>
                        {{ object.date_start }} to {{ object.date_end }}
                        <br/>
                        <strong>Total Hours:</strong>
                        {{ object.total_hours }}
                        <br/>
                        <br/>
                        You can access the timesheet by clicking on the following link:
                        <br/>
                        <a href="/web#id={{ object.id }}&amp;model=hr.timesheet.approval&amp;view_type=form"
                           style="background-color: #875A7B; padding: 8px 16px 8px 16px; text-decoration: none; color: #fff; border-radius: 5px; font-size:13px;">
                            View Timesheet
                        </a>
                        <br/>
                        <br/>
                        Thank you,
                        <br/>
                        --
                        <br/>
                        Odoo HR Team
                    </p>
                </div>
            </field>
            <field name="lang">{{ object.hr_manager_id.partner_id.lang }}</field>
            <field name="auto_delete" eval="True"/>
        </record>

        <record id="email_template_timesheet_final_approval" model="mail.template">
            <field name="name">Timesheet: Final Approval</field>
            <field name="model_id" ref="model_hr_timesheet_approval"/>
            <field name="subject">Timesheet Approved: {{ object.name }}</field>
            <field name="email_from">{{ user.email_formatted }}</field>
            <field name="partner_to">{{ object.employee_id.user_id.partner_id.id }}</field>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        Dear {{ object.employee_id.name }},
                        <br/>
                        <br/>
                        Your timesheet has been fully approved by all required parties.
                        <br/>
                        <br/>
                        <strong>Timesheet Reference:</strong>
                        {{ object.name }}
                        <br/>
                        <strong>Period:</strong>
                        {{ object.date_start }} to {{ object.date_end }}
                        <br/>
                        <strong>Total Hours:</strong>
                        {{ object.total_hours }}
                        <br/>
                        <br/>
                        You can access the timesheet by clicking on the following link:
                        <br/>
                        <a href="/web#id={{ object.id }}&amp;model=hr.timesheet.approval&amp;view_type=form"
                           style="background-color: #875A7B; padding: 8px 16px 8px 16px; text-decoration: none; color: #fff; border-radius: 5px; font-size:13px;">
                            View Timesheet
                        </a>
                        <br/>
                        <br/>
                        Thank you,
                        <br/>
                        --
                        <br/>
                        HR Department
                    </p>
                </div>
            </field>
            <field name="lang">{{ object.employee_id.user_id.partner_id.lang }}</field>
            <field name="auto_delete" eval="True"/>
        </record>

        <record id="email_template_timesheet_rejected" model="mail.template">
            <field name="name">Timesheet: Rejected</field>
            <field name="model_id" ref="model_hr_timesheet_approval"/>
            <field name="subject">Timesheet Rejected: {{ object.name }}</field>
            <field name="email_from">{{ user.email_formatted }}</field>
            <field name="partner_to">{{ object.employee_id.user_id.partner_id.id }}</field>
            <field name="body_html" type="html">
                <div style="margin: 0px; padding: 0px;">
                    <p style="margin: 0px; padding: 0px; font-size: 13px;">
                        Dear {{ object.employee_id.name }},
                        <br/>
                        <br/>
                        Your timesheet has been rejected.
                        <br/>
                        <br/>
                        <strong>Timesheet Reference:</strong>
                        {{ object.name }}
                        <br/>
                        <strong>Period:</strong>
                        {{ object.date_start }} to {{ object.date_end }}
                        <br/>
                        <strong>Rejected By:</strong>
                        {{ object.rejected_by.name }}
                        <br/>
                        <strong>Reason:</strong>
                        {{ object.rejection_reason or 'No reason provided' }}
                        <br/>
                        <br/>
                        Please review your timesheet, make the necessary corrections, and resubmit it for approval.
                        <br/>
                        <br/>
                        You can access the timesheet by clicking on the following link:
                        <br/>
                        <a href="/web#id={{ object.id }}&amp;model=hr.timesheet.approval&amp;view_type=form"
                           style="background-color: #875A7B; padding: 8px 16px 8px 16px; text-decoration: none; color: #fff; border-radius: 5px; font-size:13px;">
                            View Timesheet
                        </a>
                        <br/>
                        <br/>
                        Thank you,
                        <br/>
                        --
                        <br/>
                        HR Department
                    </p>
                </div>
            </field>
            <field name="lang">{{ object.employee_id.user_id.partner_id.lang }}</field>
            <field name="auto_delete" eval="True"/>
        </record>
    </data>
</odoo>